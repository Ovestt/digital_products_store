{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <!-- Кнопка "Назад" -->
        <div class="col-12 mb-3">
            <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> Back to Products
            </a>
        </div>

        <!-- Основное содержимое -->
        <div class="col-md-6">
            <div class="product-image-container">
                <img src="{{ url_for('static', filename=product.cover_image) }}" class="img-fluid rounded"
                    alt="{{ product.name }}">
            </div>
        </div>

        <div class="col-md-6">
            <h1>{{ product.name }}</h1>
            <p class="text-muted">by {{ product.creator.username }}</p>

            <div class="price-section mb-4">
                <span class="display-5 text-success">${{ "%.2f"|format(product.price) }}</span>
                {% if product.purchases|length > 0 %}
                <span class="badge bg-secondary ms-2">{{ product.purchases|length }} purchases</span>
                {% endif %}
            </div>

            <div class="description-card mb-4">
                <h5>Description</h5>
                <p>{{ product.description }}</p>
            </div>

            <div class="action-buttons">
                {% if 'user_id' in session and product.creator_id != session['user_id'] %}
                {% if in_cart %}
                <button class="btn btn-success" disabled>
                    <i class="bi bi-check-circle"></i> Already in Cart
                </button>
                {% else %}
                <a href="{{ url_for('add_to_cart', product_id=product.id) }}" class="btn btn-primary">
                    <i class="bi bi-cart-plus"></i> Add to Cart
                </a>
                {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}